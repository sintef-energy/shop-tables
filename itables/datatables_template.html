<table id="table_id"><thead><tr><th>A</th></tr></thead></table>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
<style> table td {
    text-overflow: ellipsis;
    overflow: hidden;
} </style>
<style> table th {
    text-overflow: ellipsis;
    overflow: hidden;
} </style>
<script type="module">
    // Define the table data
    const data = [];

    if (typeof require === 'undefined') {
        // TODO: This should become the default (use a simple import)
        // when the ESM version works independently of whether
        // require.js is there or not, see
        // https://datatables.net/forums/discussion/69066/esm-es6-module-support?
        const {default: $} = await import("https://esm.sh/jquery@3.5.0");
        const {default: initDataTables} = await import("https://esm.sh/datatables.net@1.11.3?deps=jquery@3.5.0");

        initDataTables();

        // Define the dt_args
        let dt_args = {};
        dt_args["data"] = data;

        // Display the table
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#table_id thead th').each( function () {
                var title = $('#table_id thead th').eq( $(this).index() ).text();
                $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
            } );

            var table = $('#table_id').DataTable(dt_args);
            
            // Apply the search
            table.columns().eq( 0 ).each( function ( colIdx ) {
                $( 'input', table.column( colIdx ).header() ).on( 'keyup change', function () {
                    table
                        .column( colIdx )
                        .search( this.value )
                        .draw();
                } );
            } );
        });
    } else {
        require(["jquery", "datatables"], ($, datatables) => {
                // Define the dt_args
                let dt_args = {};
                dt_args["data"] = data;

                // Display the table
                $(document).ready(function () {
                    $('#table_id tfoot th').each( function () {
                        var title = $(this).text();
                        $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
                    } );
                    //$('#table_id').DataTable(dt_args);
                });
            }
        )
    }
</script>
